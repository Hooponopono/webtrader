{"version":3,"sources":["../../../../src/assetindex/assetIndex.es6"],"names":["table_el","asset_win_el","header_el","dialog_buttons_el","init","li","click","windows","createBlankWindow","title","i18n","dialogClass","minWidth","minHeight","track","module_id","is_unique","data","dialog","require","initAssetWin","moveToTop","state","dropdown","display_markets","display_submarkets","is_volatility","market_submarkets","selected_market","table","asset_data","asset_data_extract","display_headers","display_asset_data","search_input","search","event","isTableRowSearchValue","asset","value","toLowerCase","indexOf","updateDisplayTable","filter","checkVolatility","market_name","market_names","volatility_indices","innerText","initTable","getActiveSymAndAssetsData","then","result","populateTable","catch","error","$","growl","message","console","active_symbols_data","Object","assign","active_symbols","asset_index_data","asset_index","isEmptyObject","parent","find","addClass","marketsDropdown","submarketsDropdown","updateTable","val","submarket_name","symbols","rows","map","props","symbol","push","forEach","asset_type","asset_list","asset_from","asset_to","assignAssetRows","fillFalseRows","row_result","assets","temp_asset","Array","length","isArray","asset_from_to","indexhead","header_length","i","row","makeSelectmenu","insertAfter","list","keys","inx","changed","submarket_list","update_list","width","selectmenu","processing_msg","attr","show","active_symbols_request","asset_index_request","Promise","all","liveapi","cached","send","results","hide","resolve","reject","$html","appendTo","rv","bind","events","on"],"mappings":"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","file":"assetIndex.js","sourcesContent":["ï»¿import $ from 'jquery';\nimport windows from '../windows/windows';\nimport liveapi from '../websockets/binary_websockets';\nimport rv from 'common/rivetsExtra';\nimport 'jquery-growl';\nimport 'css!./assetIndex.css';\nimport getMarketsSubmarkets from '../common/marketUtils';\n\nlet table_el = null;\nlet asset_win_el = null;\nlet header_el = null;\nlet dialog_buttons_el = null;\n\nexport const init = (li) => {\n    li.click(() => {\n        if (!asset_win_el) {\n            asset_win_el = windows.createBlankWindow($('<div/>'), {\n                title: 'Asset Index'.i18n(),\n                dialogClass: 'assetIndex',\n                minWidth: 800,\n                minHeight: 400,\n            });\n            asset_win_el.track({\n                module_id: 'assetIndex',\n                is_unique: true,\n                data: null\n            });\n            asset_win_el.dialog('open');\n            require(['text!assetindex/assetIndex.html'], initAssetWin);\n        } else\n            asset_win_el.moveToTop();\n    });\n}\n\nconst state = {\n    dropdown: {\n        display_markets: null,\n        display_submarkets: null,\n        is_volatility: false,\n        market_submarkets: null,\n        selected_market: null\n    },\n    table: {\n        asset_data: [],\n        asset_data_extract: [],\n        display_headers: [],\n        display_asset_data: [],\n        search_input: ''\n    },\n    search: function (event) {\n        function isTableRowSearchValue(asset) {\n            const value = state.table.search_input.toLowerCase();\n            return asset[0].toLowerCase().indexOf(value.toLowerCase()) !== -1;\n        }\n\n        return (function updateDisplayTable() {\n            state.table.display_asset_data = [];\n            state.table.display_asset_data = state.table.asset_data_extract.filter(isTableRowSearchValue);\n            state.dropdown.is_volatility = checkVolatility(state.dropdown.selected_market, state.dropdown.display_markets);\n        })();\n    }\n}\n\nconst checkVolatility = (market_name, market_names) => {\n    const volatility_indices = market_names[0][2] ? market_names[0][2].innerText : market_names[0][0].innerText;\n    const is_volatility = market_name.indexOf(volatility_indices) !== -1;\n\n    return is_volatility;\n}\n\nconst initTable = () => {\n    getActiveSymAndAssetsData()\n        .then((result) => {\n            populateTable(result);\n        })\n        .catch((error) => {\n            $.growl.error({ message: error.message });\n            console.error(error);\n        });\n\n    function populateTable(result) {\n        const active_symbols_data = Object.assign(result[0].active_symbols);\n        const asset_index_data = [...result[1].asset_index];\n\n        if($.isEmptyObject(active_symbols_data) && $.isEmptyObject(asset_index_data)) return;\n\n        state.dropdown.market_submarkets = getMarketsSubmarkets(active_symbols_data);\n        state.table.asset_data = asset_index_data;\n\n        header_el = asset_win_el.parent().find('.ui-dialog-title').addClass('with-content');\n        dialog_buttons_el = asset_win_el.parent().find('.ui-dialog-titlebar-buttonpane');\n\n        marketsDropdown(state.dropdown.market_submarkets);\n        submarketsDropdown(state.dropdown.market_submarkets);\n        updateTable(state.dropdown.display_markets.val(), state.dropdown.display_submarkets.val());\n\n        function updateTable(market_name, submarket_name) {\n            const symbols = [...state.dropdown.market_submarkets[market_name][submarket_name]];\n            state.dropdown.selected_market = market_name;\n            state.dropdown.is_volatility = checkVolatility(market_name, state.dropdown.display_markets);\n            let rows = state.table.asset_data\n                .filter((asset) => symbols.indexOf(asset[1]) > -1) // asset[1] is symbol\n                .map((asset) => {\n                    const props = [];\n                    const symbol = asset[1];\n                    const asset_data = asset[2];\n                    state.table.display_headers = [];\n                    props.push(symbol);\n                    asset_data.forEach(asset_list => {\n                        const asset_type = asset_list[1];\n                        const asset_from = asset_list[2];\n                        const asset_to = asset_list[3];\n                        state.table.display_headers.push(asset_type);\n                        props.push([asset_type, `${asset_from} - ${asset_to}`]);\n                    });\n\n                    return props;\n                });\n            rows = assignAssetRows(rows);\n            rows = fillFalseRows(rows);\n\n            state.table.display_asset_data = rows;\n            state.table.asset_data_extract = rows;\n\n            function assignAssetRows(rows) {\n                const row_result = [];\n                rows.forEach((assets) => {\n                    const temp_asset = new Array(state.table.display_headers.length + 1);\n                    assets.forEach(asset => {\n                        if (Array.isArray(asset)) {\n                            const asset_type = asset[0];\n                            const asset_from_to = asset[1];\n                            const indexhead = state.table.display_headers.indexOf(asset_type) + 1;\n                            temp_asset[indexhead] = asset_from_to;\n                        } else {\n                            temp_asset[0] = asset;\n                        }\n                    });\n                    row_result.push(temp_asset);\n                });\n                return row_result;\n            }\n\n            function fillFalseRows(rows) {\n                const header_length = state.table.display_headers.length;\n\n                for (let i = 0; i <= header_length; i++) {\n                    rows.forEach(row => {\n                        if (!row[i] || Array.isArray(row[i])) {\n                            row[i] = '-';\n                        }\n                    });\n                }\n\n                return rows;\n            }\n        }\n\n        function marketsDropdown(market_submarkets) {\n            if (!state.dropdown.display_markets) {\n                state.dropdown.display_markets = windows\n                    .makeSelectmenu($('<select />').insertAfter(asset_win_el), {\n                        list: Object.keys(market_submarkets),\n                        inx: 0,\n                        changed: (val) => {\n                            const submarket_list = Object.keys(market_submarkets[val]);\n                            state.dropdown.display_submarkets.update_list(submarket_list);\n                            updateTable(state.dropdown.display_markets.val(), state.dropdown.display_submarkets.val());\n                        },\n                        width: '180px'\n                    });\n                state.dropdown.display_markets.selectmenu('widget').addClass('asset-index-selectmenu');\n            } else {\n                state.dropdown.display_markets.update_list(Object.keys(market_submarkets));\n            }\n        }\n\n        function submarketsDropdown(market_submarkets) {\n            if (!state.dropdown.display_submarkets) {\n                state.dropdown.display_submarkets = windows\n                    .makeSelectmenu($('<select />').insertAfter(asset_win_el), {\n                        list: Object.keys(market_submarkets[state.dropdown.display_markets.val()]),\n                        inx: 0,\n                        changed: (val) => {\n                            updateTable(state.dropdown.display_markets.val(), state.dropdown.display_submarkets.val());\n                        },\n                        width: '200px'\n                    });\n                state.dropdown.display_submarkets.selectmenu('widget').addClass('asset-index-selectmenu');\n            } else {\n                state.dropdown.display_submarkets.update_list(Object.keys(market_submarkets[state.dropdown.display_markets.val()]));\n            }\n        }\n    }\n\n    function getActiveSymAndAssetsData() {\n        const processing_msg = $(`#${table_el.attr('id')}_processing`).show();\n        const active_symbols_request = { active_symbols: 'brief' };\n        const asset_index_request = { asset_index: 1 };\n\n        return Promise.all(\n            [\n                liveapi.cached.send(active_symbols_request),\n                liveapi.cached.send(asset_index_request),\n            ])\n            .then((results) => {\n                processing_msg.hide();\n                return Promise.resolve(results);\n            })\n            .catch((error) => {\n                processing_msg.hide();\n                return Promise.reject(error);\n            });\n    };\n}\n\nconst initAssetWin = ($html) => {\n    $html = $($html).i18n();\n    table_el = $html.filter('table');\n    $html.appendTo(asset_win_el);\n    rv.bind($html[0], state);\n    initTable();\n    require(['websockets/binary_websockets'], (liveapi) => {\n      liveapi.events.on('login', initTable);\n      liveapi.events.on('logout', initTable);\n   });\n}\n\nexport default {\n    init\n}"]}