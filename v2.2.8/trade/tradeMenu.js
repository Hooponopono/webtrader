define(["exports","jquery","../websockets/binary_websockets","../navigation/menu","../common/marketUtils","jquery-growl"],function(e,n,a,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;var s=o(n),r=o(a),u=o(t);function o(e){return e&&e.__esModule?e:{default:e}}var d=function(e){s.default.growl.error({message:e.message})},l=function(){r.default.send({active_symbols:"brief"}).then(function(e){var n=_(e.active_symbols).groupBy("market").map(function(e){var n=_.head(e),a={name:n.market,display_name:n.market_display_name};return a.submarkets=_(e).groupBy("submarket").map(function(e){var n=_.head(e),a={name:n.submarket,display_name:n.submarket_display_name};return a.instruments=_.map(e,function(e){return{symbol:e.symbol,display_name:e.display_name,is_disabled:e.is_trading_suspended||!e.exchange_is_open,pip:e.pip}}),a.is_disabled=_.every(a.instruments,"is_disabled"),a}).value(),a.is_disabled=_.every(a.submarkets,"is_disabled"),a}).value();n=(0,i.getMarketPosition)(n);var a=(0,s.default)("#nav-menu").find(".trade");u.default.refreshMenu(a,n,function(a,t,i){r.default.send({contracts_for:a}).then(function(n){require(["trade/tradeDialog"],function(e){return e.init({symbol:a,display_name:t,pip:i},n.contracts_for)})}).catch(d)})}).catch(d)},m=e.init=function(){require(["trade/tradeDialog"]),l(),require(["websockets/binary_websockets"],function(e){e.events.on("login",l),e.events.on("logout",l)});(0,s.default)("#nav-menu").find(".trade").on("mouseleave",l)};e.default={init:m}});