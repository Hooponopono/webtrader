define(["exports","../websockets/binary_websockets","../windows/windows","../common/rivetsExtra","lodash","text!./login.html","css!./login.css"],function(a,b,c,d,e,f){"use strict";function g(a){return a&&a.__esModule?a:{"default":a}}function h(){var a=i["default"].app_id,b=new URL(window.location.href).hostname,c=b.includes("binary.me")?".me":".com",d=i["default"].server_url.includes("qa")?i["default"].server_url:"oauth.binary"+c,e=(local_storage.get("i18n")||{value:"en"}).value,f="https://"+d+"/oauth2/authorize?app_id="+a+"&l="+e;window.location=f}Object.defineProperty(a,"__esModule",{value:!0}),a.init=a.login=void 0;var i=g(b),j=g(c),k=g(d),l=(g(e),g(f)),m=null,n=null;a.login=h;var o=a.init=function(){if(m)return void m.moveToTop();var a=$(l["default"]).i18n();m=j["default"].createBlankWindow(a,{title:"Log in",resizable:!1,collapsable:!1,minimizable:!1,maximizable:!1,width:548,height:"auto",close:function(){m.dialog("destroy"),m.remove(),m=null},open:function(){},destroy:function(){n&&n.unbind(),n=null}}),m.parent().css("overflow","visible"),p(a,m),m.dialog("open");var b=m.dialog("widget").offset();b.top=120,m.dialog("option","position",{my:b.left,at:b.top}),m.dialog("widget").css({left:b.left+"px",top:b.top+"px"}),m.dialog("widget").find(".ui-selectmenu-menu ul").css("max-height","320px")},p=function(a){var b={login_button_disabled:!1,login:function(){b.login_button_disabled=!0,h()},onRegister:function(){var a=getBinaryUrl("home");window.open(a,"_blank")}};n=k["default"].bind(a[0],b)};a["default"]={init:o,login:h}});